{"version":3,"file":"index.cjs","sources":["../../../app/v-el-table-source/src/components/utils/I18N.ts","../../../app/v-el-table-source/src/components/utils/i18n-init.ts","../../../app/v-el-table-source/src/components/utils/index.ts"],"sourcesContent":["import { computed, reactive, ref } from 'vue'\r\n\r\nclass I18N {\r\n  locale = ref('en')\r\n  translations: { [key: string]: { [key: string]: string } }\r\n  constructor(locale: string) {\r\n    this.locale.value = locale\r\n    this.translations = reactive({\r\n      en: {\r\n        reset: 'reset',\r\n        query: 'query',\r\n      },\r\n      'zh-cn': {\r\n        reset: '重置',\r\n        query: '查询',\r\n      },\r\n    })\r\n  }\r\n  getTranslation(key: string) {\r\n    return computed(() => this.translations[this.locale.value][key])\r\n  }\r\n  t(key: string) {\r\n    return this.getTranslation(key)\r\n  }\r\n  getLocale() {\r\n    return this.locale\r\n  }\r\n  setLocale(locale: string) {\r\n    this.locale.value = locale\r\n  }\r\n  setTranslations(translations: { [key: string]: { [key: string]: string } }) {\r\n    for (const locale in translations) {\r\n      this.translations[locale] = translations[locale]\r\n    }\r\n  }\r\n  setLocalization(localization: { [key: string]: string }) {\r\n    this.translations[this.locale.value] = localization\r\n  }\r\n  setTranslationByLocale(locale: string, translation: { [key: string]: string }) {\r\n    this.translations[locale] = translation\r\n  }\r\n}\r\n\r\nexport const i18n = new I18N('en')\r\n","// import { useGlobalConfig } from 'element-plus'\r\nimport { ref, type Ref, watchEffect, type WatchOptionsBase, type WatchStopHandle } from 'vue'\r\nimport { i18n } from './I18N'\r\n\r\n// const local: Ref<any> = useGlobalConfig('locale') || ref({ name: '' })\r\n/*使用ElementPlus语言配置*/\r\nexport const lang: Ref<string> = ref('en')\r\n\r\n// 加载后，开始监听\r\nlet stopHandle: WatchStopHandle | undefined = undefined\r\n\r\nexport const watchLang = ()=>{\r\n  if (!stopHandle) {\r\n    stopHandle = watchEffect(\r\n      () => {\r\n        i18n.setLocale(lang.value)\r\n      },\r\n      { immediate: true } as WatchOptionsBase,\r\n    )\r\n  }\r\n}\r\n\r\nexport const stopWatchLang = () => {\r\n  if (stopHandle) {\r\n    stopHandle()\r\n  }\r\n}","import { isReactive, reactive, toRef } from 'vue'\r\nimport type { EventsHandlers, ObjectType } from '../interfaces'\r\n\r\nexport * from './I18N'\r\nexport * from './i18n-init'\r\n\r\nexport const toPascalNameStyle = (str: string) =>\r\n  str.replace(/[-_ ](\\w)|(^\\w)/g, (all, one) => {\r\n    return (!one ? all : one).toUpperCase()\r\n  })\r\n\r\n/**\r\n * @link https://github.com/vuejs/jsx-next/issues/217#issuecomment-743046201 How to use v-bind without arguments in jsx?\r\n * 将event handlers 由 {click:(event)=>xxx} 转为 {onClick:(event)=>xxx}\r\n */\r\nexport const eventsTransform = (handlers?: EventsHandlers) => {\r\n  if (!handlers) {\r\n    return {} as EventsHandlers\r\n  }\r\n  const map = new Map<string, (...args: unknown[]) => void>()\r\n  Object.entries(handlers).forEach(([key, handler]) => map.set(toCamelCase(`on-${key}`), handler))\r\n  return Object.fromEntries(map)\r\n}\r\n\r\nexport const toCamelCase = (str: string) => {\r\n  return str.replace(/[-_ ](\\w)|(^\\w)/g, (all, one) => {\r\n    return !one ? all.toLowerCase() : one.toUpperCase()\r\n  })\r\n}\r\n\r\nexport const toCamelCaseProp = (props: { [key: string]: unknown }) => {\r\n  const propKeys = Object.keys(props)\r\n  if (isReactive(props)) {\r\n    return reactive(\r\n      Object.fromEntries(\r\n        propKeys.map((key: string) => {\r\n          const value = toRef(props, key)\r\n          if (propKeys.find((key) => /[-_ ]/.test(key))) {\r\n            return [toCamelCase(key), value]\r\n          }\r\n          return [key, value]\r\n        })\r\n      )\r\n    )\r\n  }\r\n  return Object.fromEntries(\r\n    propKeys.map((key: string) => {\r\n      const value = props[key]\r\n      if (propKeys.find((key) => /[-_ ]/.test(key))) {\r\n        return [toCamelCase(key), value]\r\n      }\r\n      return [key, value]\r\n    })\r\n  )\r\n}\r\n\r\nexport const resetValue = <T = ObjectType>(formData: T) => {\r\n  for (const key in formData) {\r\n    // object类型处理，避免object类型被置为undifined，避免业务层因数据类型改变出现异常的情况\r\n    if (formData[key] !== null && typeof formData[key] === 'object') {\r\n      //数组、对象、函数类型\r\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n      const val = formData[key] as any\r\n      if (typeof val.constructor === 'function') {\r\n        formData[key] = new val.constructor()\r\n        continue\r\n      }\r\n    }\r\n    ;(formData[key] as unknown) = undefined\r\n  }\r\n  return formData\r\n}\r\n/**\r\n * @example\r\n * const path = 'a.b.c'\r\n * const obj = { a: { b: { c: 1 } } }\r\n * console.log(at(path, obj))\r\n */\r\nexport function at<T = unknown>(path: string, obj: unknown) {\r\n  const parts = path.split('.')\r\n  let result = obj\r\n  try {\r\n    for (let i = 0; i < parts.length; i++) {\r\n      if ([undefined, null].includes(result as undefined | null)) {\r\n        return result as undefined | null\r\n      } else {\r\n        result = (result as ObjectType)[parts[i]]\r\n      }\r\n    }\r\n    return result as T\r\n  } catch (error) {\r\n    console.error(error)\r\n  }\r\n}\r\n"],"names":["I18N","locale","__publicField","ref","reactive","key","computed","translations","localization","translation","i18n","lang","stopHandle","watchLang","watchEffect","stopWatchLang","toPascalNameStyle","str","all","one","eventsTransform","handlers","map","handler","toCamelCase","toCamelCaseProp","props","propKeys","isReactive","value","toRef","resetValue","formData","val","at","path","obj","parts","result","i","error"],"mappings":"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"}