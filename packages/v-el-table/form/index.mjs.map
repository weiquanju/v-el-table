{"version":3,"file":"index.mjs","sources":["../../../app/v-el-table-source/src/components/form/utils.ts","../../../app/v-el-table-source/src/components/form/index.ts"],"sourcesContent":["import {\r\n  ElCalendar,\r\n  ElSelect,\r\n  ElInput,\r\n  ElSwitch,\r\n  ElCheckboxGroup,\r\n  ElCheckbox,\r\n  ElTimeSelect,\r\n  ElTimePicker,\r\n  ElDatePicker,\r\n  ElRadioGroup,\r\n  ElSlider,\r\n  ElColorPicker\r\n} from 'element-plus'\r\nimport { h } from 'vue'\r\nimport { toPascalNameStyle, eventsTransform } from '../utils'\r\nimport type { FormProps, FormItemProps, ComponentName } from './type'\r\n\r\nconst ElComponents = {\r\n  ElCalendar,\r\n  ElSelect,\r\n  ElInput,\r\n  ElSwitch,\r\n  ElCheckboxGroup,\r\n  ElCheckbox,\r\n  ElTimeSelect,\r\n  ElTimePicker,\r\n  ElDatePicker,\r\n  ElRadioGroup,\r\n  ElSlider,\r\n  ElColorPicker\r\n}\r\n\r\nconst componentKey = Object.keys(ElComponents)\r\n\r\nexport const isComponentName = (name: string): name is ComponentName => componentKey.includes(name)\r\n\r\nexport const inputRender = (field: FormItemProps, formProps: FormProps) => {\r\n  const { prop, label = '' } = field?.itemProps || {}\r\n  if (!prop) {\r\n    throw new Error(\r\n      `${label || 'undefined label'} of 'FormItemProps.itemProps.prop' in form is undefined!`\r\n    )\r\n  }\r\n  const { model } = formProps.form\r\n  const { inputProps = {}, remoteHandler, inputChildren } = field\r\n\r\n  if (remoteHandler) {\r\n    remoteHandler(field)\r\n  }\r\n\r\n  let Component: Parameters<typeof h>[0] = field.inputComponent\r\n\r\n  // 如果是字符串类型\r\n  if (typeof field.inputComponent === 'string') {\r\n    const name = toPascalNameStyle(field.inputComponent)\r\n    if (!isComponentName(name)) {\r\n      throw new Error(`Error component name: ${name} .`)\r\n    }\r\n    Component = ElComponents[name] as Parameters<typeof h>[0]\r\n  }\r\n\r\n  const modelValue = (val: unknown) => {\r\n    model[prop] = val\r\n  }\r\n\r\n  return h(\r\n    Component,\r\n    {\r\n      ...inputProps,\r\n      ...eventsTransform(field.inputEvents),\r\n      modelValue: model[prop],\r\n      'onUpdate:modelValue': modelValue\r\n    },\r\n    { default: inputChildren }\r\n  )\r\n}\r\n","import type { FormProps } from './type'\r\nimport { ElForm, ElFormItem } from 'element-plus'\r\nimport { inputRender } from './utils'\r\nimport { eventsTransform } from '../utils'\r\nimport { type FunctionalComponent, h, type VNodeProps } from 'vue'\r\nimport type { ObjectType } from '../interfaces'\r\nexport type * from './type'\r\n\r\nconst VElForm = function (props: FormProps) {\r\n  const { fields = [] } = props\r\n  const children = fields\r\n    .filter(({ visible = true }) => visible)\r\n    .map((field) =>\r\n      h(ElFormItem, field.itemProps as VNodeProps, {\r\n        default: () => inputRender(field, props),\r\n        label: typeof field.itemProps?.label === 'function' ? field.itemProps.label : undefined,\r\n        error: typeof field.itemProps?.error === 'function' ? field.itemProps.error : undefined,\r\n      }),\r\n    )\r\n\r\n  const model = (val: ObjectType) => {\r\n    props.form.model = val\r\n  }\r\n\r\n  return h(ElForm, { ...props.form, ...eventsTransform(props.events), 'onUpdate:model': model } as VNodeProps, { default: () => children })\r\n} as FunctionalComponent<FormProps>\r\nexport default VElForm\r\n"],"names":["ElComponents","ElCalendar","ElSelect","ElInput","ElSwitch","ElCheckboxGroup","ElCheckbox","ElTimeSelect","ElTimePicker","ElDatePicker","ElRadioGroup","ElSlider","ElColorPicker","componentKey","isComponentName","name","inputRender","field","formProps","prop","label","model","inputProps","remoteHandler","inputChildren","Component","toPascalNameStyle","modelValue","val","h","eventsTransform","VElForm","props","fields","children","visible","ElFormItem","_a","_b","ElForm"],"mappings":";;;AAkBA,MAAMA,IAAe;AAAA,EACnB,YAAAC;AAAA,EACA,UAAAC;AAAA,EACA,SAAAC;AAAA,EACA,UAAAC;AAAA,EACA,iBAAAC;AAAA,EACA,YAAAC;AAAA,EACA,cAAAC;AAAA,EACA,cAAAC;AAAA,EACA,cAAAC;AAAA,EACA,cAAAC;AAAA,EACA,UAAAC;AAAA,EACA,eAAAC;AACF,GAEMC,IAAe,OAAO,KAAKb,CAAY,GAEhCc,IAAkB,CAACC,MAAwCF,EAAa,SAASE,CAAI,GAErFC,IAAc,CAACC,GAAsBC,MAAyB;AACzE,QAAM,EAAE,MAAAC,GAAM,OAAAC,IAAQ,GAAO,KAAAH,KAAA,gBAAAA,EAAO,cAAa;AACjD,MAAI,CAACE;AACH,UAAM,IAAI;AAAA,MACR,GAAGC,KAAS,iBAAiB;AAAA,IAAA;AAG3B,QAAA,EAAE,OAAAC,EAAM,IAAIH,EAAU,MACtB,EAAE,YAAAI,IAAa,CAAI,GAAA,eAAAC,GAAe,eAAAC,MAAkBP;AAE1D,EAAIM,KACFA,EAAcN,CAAK;AAGrB,MAAIQ,IAAqCR,EAAM;AAG3C,MAAA,OAAOA,EAAM,kBAAmB,UAAU;AACtC,UAAAF,IAAOW,EAAkBT,EAAM,cAAc;AAC/C,QAAA,CAACH,EAAgBC,CAAI;AACvB,YAAM,IAAI,MAAM,yBAAyBA,CAAI,IAAI;AAEnD,IAAAU,IAAYzB,EAAae,CAAI;AAAA,EAC/B;AAEM,QAAAY,IAAa,CAACC,MAAiB;AACnC,IAAAP,EAAMF,CAAI,IAAIS;AAAA,EAAA;AAGT,SAAAC;AAAA,IACLJ;AAAA,IACA;AAAA,MACE,GAAGH;AAAA,MACH,GAAGQ,EAAgBb,EAAM,WAAW;AAAA,MACpC,YAAYI,EAAMF,CAAI;AAAA,MACtB,uBAAuBQ;AAAA,IACzB;AAAA,IACA,EAAE,SAASH,EAAc;AAAA,EAAA;AAE7B,GCpEMO,IAAU,SAAUC,GAAkB;AAC1C,QAAM,EAAE,QAAAC,IAAS,GAAO,IAAAD,GAClBE,IAAWD,EACd,OAAO,CAAC,EAAE,SAAAE,IAAU,GAAA,MAAWA,CAAO,EACtC;AAAA,IAAI,CAAClB,MAAA;;AACJ,aAAAY,EAAEO,GAAYnB,EAAM,WAAyB;AAAA,QAC3C,SAAS,MAAMD,EAAYC,GAAOe,CAAK;AAAA,QACvC,OAAO,SAAOK,IAAApB,EAAM,cAAN,gBAAAoB,EAAiB,UAAU,aAAapB,EAAM,UAAU,QAAQ;AAAA,QAC9E,OAAO,SAAOqB,IAAArB,EAAM,cAAN,gBAAAqB,EAAiB,UAAU,aAAarB,EAAM,UAAU,QAAQ;AAAA,MAAA,CAC/E;AAAA;AAAA,EAAA,GAGCI,IAAQ,CAACO,MAAoB;AACjC,IAAAI,EAAM,KAAK,QAAQJ;AAAA,EAAA;AAGrB,SAAOC,EAAEU,GAAQ,EAAE,GAAGP,EAAM,MAAM,GAAGF,EAAgBE,EAAM,MAAM,GAAG,kBAAkBX,EAAM,GAAiB,EAAE,SAAS,MAAMa,GAAU;AAC1I;"}