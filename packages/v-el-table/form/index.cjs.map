{"version":3,"file":"index.cjs","sources":["../../../app/v-el-table-source/src/components/form/utils.ts","../../../app/v-el-table-source/src/components/form/index.ts"],"sourcesContent":["import * as ElComponents from 'element-plus/es/components/index'\r\nimport { h } from 'vue'\r\nimport { toPascalNameStyle, eventsTransform } from '../utils'\r\nimport type { FormProps, FormItemProps, ComponentName } from './type'\r\n\r\nconst componentKey = Object.keys(ElComponents)\r\n\r\nexport const isComponentName = (name: string): name is ComponentName => componentKey.includes(name)\r\n\r\nexport const inputRender = (field: FormItemProps, formProps: FormProps) => {\r\n  const { prop, label = '' } = field?.itemProps || {}\r\n  if (!prop) {\r\n    throw new Error(`${label || 'undefined label'} of 'FormItemProps.itemProps.prop' in form is undefined!`)\r\n  }\r\n  const { model } = formProps.form\r\n  const { inputProps = {}, remoteHandler, inputChildren } = field\r\n\r\n  if (remoteHandler) {\r\n    remoteHandler(field)\r\n  }\r\n\r\n  let Component: Parameters<typeof h>[0] = field.inputComponent\r\n\r\n  // 如果是字符串类型\r\n  if (typeof field.inputComponent === 'string') {\r\n    const name = toPascalNameStyle(field.inputComponent)\r\n    if (!isComponentName(name)) {\r\n      throw new Error(`Error component name: ${name} .`)\r\n    }\r\n    Component = ElComponents[name] as Parameters<typeof h>[0]\r\n  }\r\n\r\n  const modelValue = (val: unknown) => {\r\n    model[prop] = val\r\n  }\r\n\r\n  return h(\r\n    Component,\r\n    {\r\n      ...inputProps,\r\n      ...eventsTransform(field.inputEvents),\r\n      modelValue: model[prop],\r\n      'onUpdate:modelValue': modelValue,\r\n    },\r\n    { default: inputChildren },\r\n  )\r\n}\r\n","import type { FormProps } from './type'\r\nimport { ElForm, ElFormItem } from 'element-plus'\r\nimport { inputRender } from './utils'\r\nimport { eventsTransform } from '../utils'\r\nimport { type FunctionalComponent, h, type VNodeProps } from 'vue'\r\nimport type { ObjectType } from '../interfaces'\r\nexport type * from './type'\r\n\r\nconst VElForm = function (props: FormProps) {\r\n  const { fields = [] } = props\r\n  const children = fields\r\n    .filter(({ visible = true }) => visible)\r\n    .map((field) =>\r\n      h(ElFormItem, field.itemProps as VNodeProps, {\r\n        default: () => inputRender(field, props),\r\n        label: typeof field.itemProps?.label === 'function' ? field.itemProps.label : undefined,\r\n        error: typeof field.itemProps?.error === 'function' ? field.itemProps.error : undefined,\r\n      }),\r\n    )\r\n\r\n  const model = (val: ObjectType) => {\r\n    props.form.model = val\r\n  }\r\n\r\n  return h(ElForm, { ...props.form, ...eventsTransform(props.events), 'onUpdate:model': model } as VNodeProps, { default: () => children })\r\n} as FunctionalComponent<FormProps>\r\nexport default VElForm\r\n"],"names":["componentKey","ElComponents","isComponentName","name","inputRender","field","formProps","prop","label","model","inputProps","remoteHandler","inputChildren","Component","toPascalNameStyle","modelValue","val","h","eventsTransform","VElForm","props","fields","children","visible","ElFormItem","_a","_b","ElForm"],"mappings":"qgBAKMA,EAAe,OAAO,KAAKC,CAAY,EAEhCC,EAAmBC,GAAwCH,EAAa,SAASG,CAAI,EAErFC,EAAc,CAACC,EAAsBC,IAAyB,CACzE,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAQ,EAAO,GAAAH,GAAA,YAAAA,EAAO,YAAa,GACjD,GAAI,CAACE,EACH,MAAM,IAAI,MAAM,GAAGC,GAAS,iBAAiB,0DAA0D,EAEnG,KAAA,CAAE,MAAAC,CAAM,EAAIH,EAAU,KACtB,CAAE,WAAAI,EAAa,CAAI,EAAA,cAAAC,EAAe,cAAAC,GAAkBP,EAEtDM,GACFA,EAAcN,CAAK,EAGrB,IAAIQ,EAAqCR,EAAM,eAG3C,GAAA,OAAOA,EAAM,gBAAmB,SAAU,CACtC,MAAAF,EAAOW,EAAAA,kBAAkBT,EAAM,cAAc,EAC/C,GAAA,CAACH,EAAgBC,CAAI,EACvB,MAAM,IAAI,MAAM,yBAAyBA,CAAI,IAAI,EAEnDU,EAAYZ,EAAaE,CAAI,CAC/B,CAEM,MAAAY,EAAcC,GAAiB,CACnCP,EAAMF,CAAI,EAAIS,CAAA,EAGT,OAAAC,EAAA,EACLJ,EACA,CACE,GAAGH,EACH,GAAGQ,EAAgB,gBAAAb,EAAM,WAAW,EACpC,WAAYI,EAAMF,CAAI,EACtB,sBAAuBQ,CACzB,EACA,CAAE,QAASH,CAAc,CAAA,CAE7B,ECtCMO,EAAU,SAAUC,EAAkB,CAC1C,KAAM,CAAE,OAAAC,EAAS,EAAO,EAAAD,EAClBE,EAAWD,EACd,OAAO,CAAC,CAAE,QAAAE,EAAU,EAAA,IAAWA,CAAO,EACtC,IAAKlB,GAAA,SACJY,OAAAA,EAAE,EAAAO,aAAYnB,EAAM,UAAyB,CAC3C,QAAS,IAAMD,EAAYC,EAAOe,CAAK,EACvC,MAAO,QAAOK,EAAApB,EAAM,YAAN,YAAAoB,EAAiB,QAAU,WAAapB,EAAM,UAAU,MAAQ,OAC9E,MAAO,QAAOqB,EAAArB,EAAM,YAAN,YAAAqB,EAAiB,QAAU,WAAarB,EAAM,UAAU,MAAQ,MAAA,CAC/E,EAAA,EAGCI,EAASO,GAAoB,CACjCI,EAAM,KAAK,MAAQJ,CAAA,EAGrB,OAAOC,EAAAA,EAAEU,EAAAA,OAAQ,CAAE,GAAGP,EAAM,KAAM,GAAGF,kBAAgBE,EAAM,MAAM,EAAG,iBAAkBX,CAAM,EAAiB,CAAE,QAAS,IAAMa,EAAU,CAC1I"}