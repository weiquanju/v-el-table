"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const a=require("vue"),d=require("element-plus"),P=require("../form/index.cjs"),b=require("../table/index.cjs"),l=require("../utils/index.cjs"),h=require("@element-plus/icons-vue");function m(i){const e=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(i){for(const o in i)if(o!=="default"){const r=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(e,o,r.get?r:{enumerable:!0,get:()=>i[o]})}}return e.default=i,Object.freeze(e)}const v=m(h),y={currentPage:1,pageSizes:[10,20,30,40,50],pageSize:10,layout:"total, sizes, prev, pager, next, jumper",total:0},w={data:"data",currentPage:"page",total:"total"},_="_tp_iw8wy_1",S="_tpHeader_iw8wy_11",T="_tpTitle_iw8wy_19",q="_tpBtn_iw8wy_25",z="_tpTable_iw8wy_33",O="_tpPagination_iw8wy_39",c={tp:_,tpHeader:S,tpTitle:T,tpBtn:q,tpTable:z,tpPagination:O},E=(i,{slots:e})=>{a.nextTick(()=>{r()});const o=a.ref(null),r=()=>{var t;if(!((t=o.value)!=null&&t.offsetWidth))return;const n=()=>{var s;if(!o.value)return;const{style:u}=o.value,f=Math.floor(((s=o.value)==null?void 0:s.offsetWidth)/300);u.setProperty("--tp-column-num",f.toString())};new ResizeObserver(n).observe(o.value)};return a.h("div",{class:[c.tp,"v-el-table"]},[a.h("div",{class:[c.tpHeader,"v-el-table-header"]},[a.h("div",{class:[c.tpTitle,"v-el-table-title"]},[e.title&&e.title()]),a.h("div",{class:[c.tpBtn,"v-el-table-button"]},[e.btn&&e.btn()])]),a.h("div",{class:["tp_filter_x001","v-el-table-filter"],ref:o},[e.filter&&e.filter()]),a.h("div",{class:[c.tpTable,"v-el-table-main"]},[e.table&&e.table()]),a.h("div",{class:[c.tpPagination,"v-el-table-pagination"]},[e.pagination&&e.pagination()])])},B=({name:i,icon:e,events:o={},buttonProps:r={}})=>a.h(d.ElButton,{...l.eventsTransform(o),...r},{icon:()=>a.h(v[e]),default:()=>a.isRef(i)?i.value:i}),k=({props:i,query:e})=>[...[{key:"query",name:l.i18n.t("query"),icon:"Search",events:{click:e}},{key:"reset",name:l.i18n.t("reset"),icon:"CircleClose",events:{click:()=>l.resetValue(i.formProps.form.model)}}],...i.buttons||[]].map(r=>{if(Array.isArray(r)){const[n,...p]=r;return a.h(n,...p)}return B(r)}),N=function(i){const e=l.toCamelCaseProp(i),o=()=>({pageSize:n.pageSize,currentPage:n.currentPage,...e.formProps.form.model,...e.queryParams||{}}),r=async()=>{const t=Object.assign({},w,e.responsePath),u=await e.query(o()),f=l.at(t.data,u)||[],s=l.at(t.total,u)||0,g=l.at(t.currentPage,u)||1;if(s===void 0||isNaN(s))throw console.warn("merged path data",JSON.stringify(t)),new Error("Get `total` param error when query data.Please check VElTablePlus configuration parameter `responsePath`.");if(g===void 0||isNaN(g))throw console.warn("merged path data",JSON.stringify(t)),new Error("Get `currentPage` param error when query data.Please check VElTablePlus configuration parameter `responsePath`.");if(f===void 0)throw console.warn("merged path data",JSON.stringify(t)),new Error("Get `data` param error when query data.Please check VElTablePlus configuration parameter `responsePath`.");e.tableProps.table.data=f,n.total=s,n.currentPage=g},n=a.reactive(Object.assign(y,e.pagination,{onSizeChange(t){n.pageSize!==t&&(n.pageSize=t,r())},"onUpdate:page-size"(t){n.pageSize!==t&&(n.pageSize=t,r())},onCurrentChange(t){n.currentPage!==t&&(n.currentPage=t,r())},"onUpdate:current-page"(t){n.currentPage!==t&&(n.currentPage=t,r())}})),p={title:()=>e.title,btn:()=>a.h(d.ElButtonGroup,null,{default:()=>k({props:e,query:r})}),filter:()=>a.h(P.default,e.formProps),table:()=>a.h(b.default,e.tableProps),pagination:()=>a.h(d.ElPagination,n)};return e.initQuery===!0&&r(),a.h(e.layout||E,e.layoutProps,p)};exports.default=N;
//# sourceMappingURL=index.cjs.map
